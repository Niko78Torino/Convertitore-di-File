<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convertitore di File</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8268426852108056"
     crossorigin="anonymous"></script>
    <!-- Tailwind CSS per lo stile -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Libreria jsPDF per la conversione da testo a PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Libreria docx per la conversione a DOCX -->
    <script src="https://unpkg.com/docx@8.5.0/build/index.js"></script>
    <!-- Librerie per la conversione da DOCX a PDF/Immagini -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.7.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .file-drop-area {
            transition: all 0.2s ease-in-out;
        }
        .file-drop-area.dragover {
            background-color: #e0f2fe; /* light blue */
            border-color: #38bdf8; /* sky blue */
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-radius: 50%;
            border-top: 4px solid #3498db;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        /* Stili per il selettore di lingua */
        .lang-btn.active {
            font-weight: bold;
            color: #4f46e5; /* Indigo */
            text-decoration: underline;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-600 to-indigo-600 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-2xl bg-white rounded-2xl shadow-lg p-8 space-y-6">
        <!-- Intestazione -->
        <div class="text-center relative">
            <div class="absolute top-0 right-0 text-sm">
                <button id="lang-it" class="lang-btn p-1" data-lang="it">IT</button>
                <span>/</span>
                <button id="lang-en" class="lang-btn p-1" data-lang="en">EN</button>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold text-slate-800" data-lang-key="title">Convertitore di File</h1>
            <p class="text-slate-500 mt-2" data-lang-key="subtitle">Converte file .txt e .docx in PDF, DOCX, TXT, PNG e JPG.</p>
        </div>

        <!-- Area di caricamento file -->
        <div id="upload-area">
            <label for="file-input" class="file-drop-area relative block w-full rounded-lg border-2 border-dashed border-slate-300 p-12 text-center hover:border-slate-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 cursor-pointer">
                <div class="flex flex-col items-center justify-center space-y-2">
                     <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-slate-400"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M12 12v9"/><path d="m16 16-4-4-4 4"/></svg>
                    <span class="block font-medium text-slate-600" data-lang-key="dragFile">Trascina un file qui</span>
                    <span class="text-slate-500 text-sm" data-lang-key="or">o</span>
                    <span class="relative bg-indigo-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-indigo-700" data-lang-key="chooseFile">
                        Scegli un file
                    </span>
                </div>
                <input type="file" id="file-input" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" accept=".txt,.docx">
            </label>
            <p id="file-name" class="text-center text-slate-500 mt-4 h-6"></p>
        </div>

        <!-- Opzioni di conversione -->
        <div id="options-area" class="hidden space-y-4 md:space-y-0 md:flex md:items-center md:justify-around md:space-x-4">
            <div class="flex-1">
                <label for="to-format" class="block text-sm font-medium text-slate-700 mb-1" data-lang-key="convertTo">Converti in:</label>
                <select id="to-format" class="w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    <option value="pdf">PDF (.pdf)</option>
                    <option value="docx">Word (.docx)</option>
                    <option value="jpg">JPG (.jpg)</option>
                    <option value="png">PNG (.png)</option>
                    <option value="txt">Testo (.txt)</option>
                </select>
            </div>
            <button id="convert-btn" class="w-full md:w-auto bg-indigo-600 text-white px-8 py-3 rounded-md font-semibold hover:bg-indigo-700 transition-colors flex items-center justify-center space-x-2 md:mt-6">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.17 13.17-2.34-2.34a2 2 0 0 0-2.83 0l-4 4-1.73-1.73a2 2 0 0 0-2.83 0L2.83 17.17a2 2 0 0 0 0 2.83l2.34 2.34a2 2 0 0 0 2.83 0l4-4 1.73 1.73a2 2 0 0 0 2.83 0l4.59-4.59a2 2 0 0 0 0-2.83Z"/><path d="m2.83 2.83 18.34 18.34"/></svg>
                <span data-lang-key="convertBtn">Converti</span>
            </button>
        </div>
        
        <!-- Area Risultati e Azioni -->
        <div id="result-area" class="hidden text-center p-6 bg-green-50 rounded-lg border border-green-200">
             <div id="loader" class="loader mx-auto hidden"></div>
             <div id="success-content">
                <h3 class="text-lg font-semibold text-green-800" data-lang-key="conversionComplete">Conversione completata!</h3>
                <p class="text-green-600 mt-1" data-lang-key="fileReady">Il tuo file è pronto per essere scaricato.</p>
                <div class="mt-6 flex flex-col md:flex-row items-center justify-center gap-4 flex-wrap">
                    <button id="download-btn" class="w-full md:w-auto bg-green-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors flex items-center justify-center space-x-2">
                       <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
                        <span data-lang-key="download">Scarica</span>
                    </button>
                    <button id="share-btn" class="w-full md:w-auto bg-sky-500 text-white px-6 py-2 rounded-md font-semibold hover:bg-sky-600 transition-colors flex items-center justify-center space-x-2">
                       <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/></svg>
                        <span data-lang-key="share">Condividi</span>
                    </button>
                     <button id="new-conversion-btn" class="w-full md:w-auto bg-slate-500 text-white px-6 py-2 rounded-md font-semibold hover:bg-slate-600 transition-colors flex items-center justify-center space-x-2">
                       <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2v6h-6"/><path d="M3 12a9 9 0 1 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/></svg>
                        <span data-lang-key="newConversion">Nuova Conversione</span>
                    </button>
                </div>
            </div>
        </div>
        
         <!-- Messaggio di errore -->
        <div id="error-message" class="hidden text-center text-red-600 bg-red-100 p-3 rounded-md"></div>

        <!-- Footer -->
        <footer class="text-center text-sm text-slate-500 pt-6 border-t border-slate-200">
            <p data-lang-key="copyright">&copy; 2025 Nicola Nicolaci - <a href="#" id="license-link" class="underline hover:text-slate-700" data-lang-key="mitLicense">Licenza MIT</a></p>
            <div class="mt-2">
                <a href="#" id="disclaimer-link" class="underline hover:text-slate-700" data-lang-key="disclaimer">Disclaimer</a>
                <span class="mx-2">&middot;</span>
                <a href="#" id="privacy-link" class="underline hover:text-slate-700" data-lang-key="privacyPolicy">Privacy Policy</a>
            </div>
        </footer>
    </div>
    
    <!-- Modale per Disclaimer e Privacy -->
    <div id="legal-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="modal-content bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] overflow-y-auto p-6 transform scale-95">
            <div class="flex justify-between items-center border-b pb-3">
                <h2 id="modal-title" class="text-xl font-bold text-slate-800" data-lang-key="legalInfo">Informazioni Legali</h2>
                <button id="close-modal-btn" class="text-slate-500 hover:text-slate-800">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div id="modal-body" class="mt-4 prose max-w-none text-slate-600">
                <!-- Il contenuto verrà inserito qui da JavaScript -->
            </div>
        </div>
    </div>


    <script>
        // --- INIZIO SEZIONE MULTILINGUA ---
        const translations = {
            it: {
                title: "Convertitore di File",
                subtitle: "Converte file .txt e .docx in PDF, DOCX, TXT, PNG e JPG.",
                dragFile: "Trascina un file qui",
                or: "o",
                chooseFile: "Scegli un file",
                convertTo: "Converti in:",
                convertBtn: "Converti",
                conversionComplete: "Conversione completata!",
                fileReady: "Il tuo file è pronto per essere scaricato.",
                download: "Scarica",
                share: "Condividi",
                newConversion: "Nuova Conversione",
                copyright: `&copy; 2025 Nicola Nicolaci - <a href="#" id="license-link" class="underline hover:text-slate-700" data-lang-key="mitLicense">Licenza MIT</a>`,
                mitLicense: "Licenza MIT",
                disclaimer: "Disclaimer",
                privacyPolicy: "Privacy Policy",
                legalInfo: "Informazioni Legali",
                shareMessage: (fileName, link) => `Ecco il file ${fileName} che ho convertito con questo strumento online: ${link}`,
                shareFallback: (fileName, link) => `Ho convertito un file chiamato ${fileName}! Prova anche tu lo strumento: ${link}`,
                shareUnsupportedCopySuccess: "Condivisione file non supportata, ma ho copiato un messaggio con il link negli appunti!",
                shareUnsupportedCopyError: "La condivisione di file non è supportata su questo browser.",
                errorSelectFile: "Per favore, seleziona un file prima.",
                errorPdfCreation: "Errore durante la creazione del PDF.",
                errorDocxCreation: "Errore durante la creazione del file DOCX.",
                errorImageCreation: (format) => `Errore durante la creazione del file .${format}.`,
                errorUnsupportedConversion: (from, to) => `Conversione da .${from} a .${to} non supportata.`,
                errorDocxToPdf: "Errore durante la conversione da DOCX a PDF.",
                errorExtractText: "Errore estraendo testo da DOCX.",
                errorDocxToImage: (format) => `Errore durante la conversione da DOCX a .${format}.`
            },
            en: {
                title: "File Converter",
                subtitle: "Converts .txt and .docx files to PDF, DOCX, TXT, PNG, and JPG.",
                dragFile: "Drag a file here",
                or: "or",
                chooseFile: "Choose a file",
                convertTo: "Convert to:",
                convertBtn: "Convert",
                conversionComplete: "Conversion complete!",
                fileReady: "Your file is ready to be downloaded.",
                download: "Download",
                share: "Share",
                newConversion: "New Conversion",
                copyright: `&copy; 2025 Nicola Nicolaci - <a href="#" id="license-link" class="underline hover:text-slate-700" data-lang-key="mitLicense">MIT License</a>`,
                mitLicense: "MIT License",
                disclaimer: "Disclaimer",
                privacyPolicy: "Privacy Policy",
                legalInfo: "Legal Information",
                shareMessage: (fileName, link) => `Here is the file ${fileName} I converted with this online tool: ${link}`,
                shareFallback: (fileName, link) => `I converted a file called ${fileName}! You can try the tool too: ${link}`,
                shareUnsupportedCopySuccess: "File sharing not supported, but I copied a message with the link to your clipboard!",
                shareUnsupportedCopyError: "File sharing is not supported on this browser.",
                errorSelectFile: "Please select a file first.",
                errorPdfCreation: "Error while creating PDF.",
                errorDocxCreation: "Error while creating DOCX file.",
                errorImageCreation: (format) => `Error while creating .${format} file.`,
                errorUnsupportedConversion: (from, to) => `Conversion from .${from} to .${to} is not supported.`,
                errorDocxToPdf: "Error converting DOCX to PDF.",
                errorExtractText: "Error extracting text from DOCX.",
                errorDocxToImage: (format) => `Error converting DOCX to .${format}.`
            }
        };

        let currentLang = 'it';

        function setLanguage(lang) {
            currentLang = lang;
            document.documentElement.lang = lang;
            document.querySelectorAll('[data-lang-key]').forEach(elem => {
                const key = elem.dataset.langKey;
                if (translations[lang][key]) {
                    elem.innerHTML = translations[lang][key];
                }
            });
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`lang-${lang}`).classList.add('active');

            // Riassegna gli eventi ai link nel footer che vengono ricreati
            document.getElementById('license-link').addEventListener('click', (e) => { e.preventDefault(); openModal(translations[currentLang].mitLicense, licenseContent); });
            document.getElementById('disclaimer-link').addEventListener('click', (e) => { e.preventDefault(); openModal(translations[currentLang].disclaimer, disclaimerContent); });
            document.getElementById('privacy-link').addEventListener('click', (e) => { e.preventDefault(); openModal(translations[currentLang].privacyPolicy, privacyContent); });
        }
        
        document.getElementById('lang-it').addEventListener('click', () => setLanguage('it'));
        document.getElementById('lang-en').addEventListener('click', () => setLanguage('en'));

        // --- FINE SEZIONE MULTILINGUA ---


        // Variabili esistenti
        const fileInput = document.getElementById('file-input');
        const fileNameDisplay = document.getElementById('file-name');
        const optionsArea = document.getElementById('options-area');
        const convertBtn = document.getElementById('convert-btn');
        const resultArea = document.getElementById('result-area');
        const downloadBtn = document.getElementById('download-btn');
        const shareBtn = document.getElementById('share-btn');
        const errorMessage = document.getElementById('error-message');
        const dropArea = document.querySelector('.file-drop-area');
        const loader = document.getElementById('loader');
        const successContent = document.getElementById('success-content');
        const newConversionBtn = document.getElementById('new-conversion-btn');

        // Variabili per la modale
        const legalModal = document.getElementById('legal-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const closeModalBtn = document.getElementById('close-modal-btn');

        let selectedFile = null;
        let convertedFileBlob = null;
        let convertedFileName = '';

        function preventDefaults(e) { e.preventDefault(); e.stopPropagation(); }
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            document.body.addEventListener(eventName, preventDefaults, false);
        });
        function highlight(e) { preventDefaults(e); dropArea.classList.add('dragover'); }
        function unhighlight(e) { preventDefaults(e); dropArea.classList.remove('dragover'); }
        function handleDrop(e) {
            unhighlight(e);
            if (e.dataTransfer.files.length > 0) handleFile(e.dataTransfer.files[0]);
        }
        dropArea.addEventListener('dragenter', highlight, false);
        dropArea.addEventListener('dragover', highlight, false);
        dropArea.addEventListener('dragleave', unhighlight, false);
        dropArea.addEventListener('drop', handleDrop, false);
        
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) handleFile(e.target.files[0]);
        });

        function handleFile(file) {
            selectedFile = file;
            fileNameDisplay.textContent = file.name;
            optionsArea.classList.remove('hidden');
            resultArea.classList.add('hidden');
            errorMessage.classList.add('hidden');
        }

        function resetState() {
            selectedFile = null;
            convertedFileBlob = null;
            convertedFileName = '';
            fileNameDisplay.textContent = '';
            optionsArea.classList.add('hidden');
            resultArea.classList.add('hidden');
            errorMessage.classList.add('hidden');
            fileInput.value = '';
        }
        newConversionBtn.addEventListener('click', resetState);

        convertBtn.addEventListener('click', () => {
            if (!selectedFile) {
                showError(translations[currentLang].errorSelectFile);
                return;
            }
            
            const toFormat = document.getElementById('to-format').value;
            const originalExtension = selectedFile.name.split('.').pop().toLowerCase();
            showLoader();

            if (originalExtension === 'txt') {
                const reader = new FileReader();
                reader.onload = async (event) => {
                    try {
                        const text = event.target.result;
                        if (toFormat === 'pdf') {
                            const { jsPDF } = window.jspdf;
                            const doc = new jsPDF();
                            doc.text(doc.splitTextToSize(text, 180), 10, 10);
                            convertedFileBlob = doc.output('blob');
                            convertedFileName = selectedFile.name.replace(/\.txt$/, '.pdf');
                        } else if (toFormat === 'docx') {
                            const { Document, Packer, Paragraph, TextRun } = window.docx;
                            const doc = new Document({ sections: [{ children: [new Paragraph({ children: [new TextRun(text)] })] }] });
                            convertedFileBlob = await Packer.toBlob(doc);
                            convertedFileName = selectedFile.name.replace(/\.txt$/, '.docx');
                        } else if (toFormat === 'png' || toFormat === 'jpg') {
                            const canvas = document.createElement('canvas');
                            const ctx = canvas.getContext('2d');
                            const padding = 20, lineHeight = 24, font = '16px Arial';
                            ctx.font = font;
                            const lines = text.split('\n');
                            canvas.width = Math.max(...lines.map(line => ctx.measureText(line).width)) + padding * 2;
                            canvas.height = lines.length * lineHeight + padding * 2;
                            ctx.fillStyle = 'white'; ctx.fillRect(0, 0, canvas.width, canvas.height);
                            ctx.fillStyle = 'black'; ctx.font = font; ctx.textBaseline = 'top';
                            lines.forEach((line, i) => ctx.fillText(line, padding, padding + i * lineHeight));
                            convertedFileBlob = await new Promise(resolve => canvas.toBlob(resolve, `image/${toFormat}`));
                            convertedFileName = selectedFile.name.replace(/\.txt$/, `.${toFormat}`);
                        } else {
                            setTimeout(() => showError(translations[currentLang].errorUnsupportedConversion('txt', toFormat)), 1000); return;
                        }
                        setTimeout(showSuccess, 1000);
                    } catch (err) {
                        const errorMap = { 'pdf': 'errorPdfCreation', 'docx': 'errorDocxCreation' };
                        const errorKey = errorMap[toFormat] || 'errorImageCreation';
                        const errorMessage = typeof translations[currentLang][errorKey] === 'function' ? translations[currentLang][errorKey](toFormat) : translations[currentLang][errorKey];
                        setTimeout(() => showError(errorMessage), 1000);
                        console.error(err);
                    }
                };
                reader.readAsText(selectedFile);
            } else if (originalExtension === 'docx') {
                const reader = new FileReader();
                reader.onload = async (event) => {
                    let tempContainer;
                    try {
                        const arrayBuffer = event.target.result;
                        if (toFormat === 'txt') {
                            const result = await mammoth.extractRawText({ arrayBuffer });
                            convertedFileBlob = new Blob([result.value], { type: 'text/plain' });
                            convertedFileName = selectedFile.name.replace(/\.docx$/, '.txt');
                        } else if (['pdf', 'png', 'jpg'].includes(toFormat)) {
                            const result = await mammoth.convertToHtml({ arrayBuffer });
                            tempContainer = document.createElement('div');
                            Object.assign(tempContainer.style, { position: 'absolute', left: '-9999px', width: '210mm', padding: '15mm', boxSizing: 'border-box', backgroundColor: 'white' });
                            tempContainer.innerHTML = result.value;
                            document.body.appendChild(tempContainer);
                            const canvas = await html2canvas(tempContainer, { scale: 2 });
                            if (toFormat === 'pdf') {
                                const { jsPDF } = window.jspdf;
                                const pdf = new jsPDF({ orientation: 'p', unit: 'px', format: [canvas.width, canvas.height] });
                                pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 0, canvas.width, canvas.height);
                                convertedFileBlob = pdf.output('blob');
                                convertedFileName = selectedFile.name.replace(/\.docx$/, '.pdf');
                            } else {
                                convertedFileBlob = await new Promise(resolve => canvas.toBlob(resolve, `image/${toFormat}`));
                                convertedFileName = selectedFile.name.replace(/\.docx$/, `.${toFormat}`);
                            }
                            document.body.removeChild(tempContainer);
                        } else {
                            setTimeout(() => showError(translations[currentLang].errorUnsupportedConversion('docx', toFormat)), 1000); return;
                        }
                        setTimeout(showSuccess, 1000);
                    } catch (err) {
                        if (tempContainer && document.body.contains(tempContainer)) document.body.removeChild(tempContainer);
                        const errorMap = { 'txt': 'errorExtractText', 'pdf': 'errorDocxToPdf' };
                        const errorKey = errorMap[toFormat] || 'errorDocxToImage';
                         const errorMessage = typeof translations[currentLang][errorKey] === 'function' ? translations[currentLang][errorKey](toFormat) : translations[currentLang][errorKey];
                        setTimeout(() => showError(errorMessage), 1000);
                        console.error(err);
                    }
                };
                reader.readAsArrayBuffer(selectedFile);
            }
        });

        downloadBtn.addEventListener('click', () => {
            if (convertedFileBlob) {
                const url = URL.createObjectURL(convertedFileBlob);
                const a = document.createElement('a');
                a.style.display = 'none'; a.href = url; a.download = convertedFileName;
                document.body.appendChild(a); a.click();
                window.URL.revokeObjectURL(url); document.body.removeChild(a);
            }
        });

        shareBtn.addEventListener('click', async () => {
            if (!convertedFileBlob) return;
            const softwareLink = 'https://link-del-tuo-software.com'; 
            const fileToShare = new File([convertedFileBlob], convertedFileName, { type: convertedFileBlob.type });
            const shareText = translations[currentLang].shareMessage(convertedFileName, softwareLink);
            
            if (navigator.canShare && navigator.canShare({ files: [fileToShare] })) {
                try {
                    await navigator.share({ files: [fileToShare], title: convertedFileName, text: shareText });
                } catch (error) { console.error('Share error:', error); }
            } else { 
                const fallbackText = translations[currentLang].shareFallback(convertedFileName, softwareLink);
                navigator.clipboard.writeText(fallbackText).then(() => {
                    alert(translations[currentLang].shareUnsupportedCopySuccess);
                }).catch(err => {
                    console.error('Copy error:', err);
                    alert(translations[currentLang].shareUnsupportedCopyError);
                });
            }
        });

        function showError(message) {
            loader.classList.add('hidden');
            resultArea.classList.add('hidden');
            errorMessage.textContent = message;
            errorMessage.classList.remove('hidden');
        }
        function showSuccess() {
            loader.classList.add('hidden');
            successContent.classList.remove('hidden');
            resultArea.classList.remove('hidden');
            errorMessage.classList.add('hidden');
        }
        function showLoader() {
            successContent.classList.add('hidden');
            loader.classList.remove('hidden');
            resultArea.classList.remove('hidden');
            errorMessage.classList.add('hidden');
        }

        const disclaimerContent = `<h4>Disclaimer</h4><p>This tool is provided "as is", without warranty of any kind. The user assumes full responsibility for the use of this software. We are not liable for any data loss, damages, or other liabilities arising from the use of this service.</p>`;
        const privacyContent = `<h4>Privacy Policy</h4><p>Your privacy is important. This application works entirely in your browser. No files are uploaded to external servers. We do not collect, save, or share the files you upload or convert.</p>`;
        const licenseContent = `<h4>MIT License</h4><pre class="whitespace-pre-wrap text-xs">Copyright (c) 2025 Nicola Nicolaci...[License text]...</pre>`;
        function openModal(title, content) {
            modalTitle.textContent = title;
            modalBody.innerHTML = content;
            legalModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        function closeModal() {
            legalModal.classList.add('hidden');
            document.body.style.overflow = '';
        }
        
        closeModalBtn.addEventListener('click', closeModal);
        legalModal.addEventListener('click', (e) => { if (e.target === legalModal) closeModal(); });

        // Imposta la lingua iniziale
        setLanguage('it');
    </script>
</body>
</html>

